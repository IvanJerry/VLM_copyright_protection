<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLM Protection System - Watermark Verification</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .upload-section {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .verification-result {
            background: white;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .result-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
        }

        .result-box {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .binary-text {
            font-family: monospace;
            word-break: break-all;
            background: #f5f5f5;
            padding: 8px;
            border-radius: 4px;
            font-size: 13px;
        }

        .image-comparison {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 12px 0;
        }

        .arrow-icon {
            font-size: 20px;
            color: #666;
        }

        .upload-btn {
            background: white;
            border: 1px dashed #ccc;
            border-radius: 4px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            margin: 8px 0;
            font-size: 14px;
        }

        .upload-btn:hover {
            border-color: #2d9cc2;
            color: #2d9cc2;
        }

        .trigger-btn {
            background: linear-gradient(135deg, #d07300, #ffa21f);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
        }

        .trigger-btn:hover {
            background: linear-gradient(135deg, #ffa21f, #d07300);
        }

        h2 {
            font-size: 20px;
            margin-bottom: 15px;
        }

        h3 {
            font-size: 16px;
            margin-bottom: 12px;
        }

        .content-section {
            padding: 15px;
        }

        img {
            max-height: 200px;
            object-fit: cover;
        }
    </style>
</head>

<body>
    <div class="app-root">
        <header class="top-nav">
            <div class="logo">VLM Protection System</div>
            <select class="model-select">
                <option>CLIP</option>
                <option>BLIP</option>
                <option>llama</option>
            </select>
            <div class="nav-actions">
                <a href="chat.html" class="monitor-btn">Monitor</a>
                <div class="user-info">User Info</div>
            </div>
        </header>
        <aside class="sidebar">
            <nav>
                <ul>
                    <li><a class="sidebar-item" href="chat.html"><i class="fas fa-comments"></i>Multi-task</a></li>
                    <li><a class="sidebar-item" href="model.html"><i class="fas fa-cube"></i>Model Management</a></li>
                    <li><a class="sidebar-item active" href="watermark.html"><i class="fas fa-stamp"></i>Watermark
                            Verification</a></li>
                    <li><a class="sidebar-item" href="text_watermark.html"><i class="fas fa-file-alt"></i>Text
                            Watermark</a></li>
                    <li><a class="sidebar-item" href="settings.html"><i class="fas fa-cog"></i>Settings</a></li>
                </ul>
            </nav>
        </aside>
        <main class="main-content">
            <section class="content-section">
                <h2>Watermark Verification</h2>

                <!-- Upload Section -->
                <div class="upload-section">
                    <div class="upload-btn">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 24px; margin-bottom: 10px;"></i>
                        <div>Upload text or picture</div>
                        <input type="file" id="file-upload" style="display: none;">
                    </div>
                    <button class="trigger-btn" style="margin-top: 15px;">
                        <i class="fas fa-play"></i> Trigger Verification
                    </button>
                </div>

                <!-- Results Section -->
                <div class="verification-result">
                    <div class="result-title">Result:</div>

                    <!-- Blackdoor Trigger Result -->
                    <div class="result-box">
                        <h3><i class="fas fa-shield-alt"></i> Blackdoor Trigger Result</h3>
                        <div style="color: #28a745; margin-top: 10px;">
                            <i class="fas fa-check-circle"></i> Yes!
                        </div>
                    </div>

                    <!-- Tracing Result -->
                    <div class="result-box">
                        <h3><i class="fas fa-project-diagram"></i> Tracing Result</h3>

                        <!-- Text Transformation -->
                        <div class="image-comparison">
                            <div class="result-box" style="flex: 1;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">Input Text:</div>
                                <div>Autumn leaves spiral in the breeze, shadows stretching across a quiet path. A
                                    bird's call fades into the distance.</div>
                            </div>
                            <div class="arrow-icon">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                            <div class="result-box" style="flex: 1;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 8px;">Binary Output:</div>
                                <div class="binary-text">100101010101010101001010100101010000101011</div>
                            </div>
                        </div>

                        <!-- Image Transformation -->
                        <div class="image-comparison">
                            <div style="flex: 1;">
                                <img src="path/to/original/image.jpg" alt="Original Image"
                                    style="width: 100%; border-radius: 4px;">
                            </div>
                            <div class="arrow-icon">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                            <div style="flex: 1;">
                                <img src="path/to/processed/image.jpg" alt="Processed Image"
                                    style="width: 100%; border-radius: 4px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrics Section -->
                <div class="verification-result">
                    <div class="result-title">Verification Metrics</div>
                    <div style="display: flex; gap: 20px;">
                        <div style="flex: 1;">
                            <canvas id="entropyRadarChart"></canvas>
                        </div>
                        <div style="flex: 1;">
                            <canvas id="embeddingRatioPieChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script>
        // Initialize file upload button
        document.querySelector('.upload-btn').addEventListener('click', () => {
            document.getElementById('file-upload').click();
        });

        // Chart initialization code (keeping existing chart code)
        let entropyRadarChart, embeddingRatioPieChart;

        function renderCharts() {
            const entropyData = {
                labels: ['0-0.2', '0.2-0.4', '0.4-0.6', '0.6-0.8', '0.8-1.0'],
                datasets: [{
                    label: 'Entropy Distribution',
                    data: [15, 25, 30, 20, 10],
                    backgroundColor: 'rgba(45, 156, 194, 0.5)',
                    borderColor: 'rgba(45, 156, 194, 1)',
                    pointBackgroundColor: 'rgba(45, 156, 194, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(45, 156, 194, 1)'
                }]
            };

            const embeddingRatioData = {
                labels: ['2-list (40%)', '4-list (30%)', '8-list (20%)', 'None (10%)'],
                datasets: [{
                    data: [40, 30, 20, 10],
                    backgroundColor: ['#d07300', '#ffa21f', '#2d9cc2', '#cccccc'],
                    borderColor: '#fff'
                }]
            };

            if (entropyRadarChart) entropyRadarChart.destroy();
            if (embeddingRatioPieChart) embeddingRatioPieChart.destroy();

            const entropyCtx = document.getElementById('entropyRadarChart').getContext('2d');
            entropyRadarChart = new Chart(entropyCtx, {
                type: 'radar',
                data: entropyData,
                options: {
                    elements: { line: { borderWidth: 3 } },
                    scales: { r: { angleLines: { display: false }, suggestedMin: 0, suggestedMax: 40, ticks: { backdropColor: '#f9f9f9' } } },
                    plugins: { legend: { labels: { color: '#d07300' } } }
                }
            });

            const embeddingRatioCtx = document.getElementById('embeddingRatioPieChart').getContext('2d');
            embeddingRatioPieChart = new Chart(embeddingRatioCtx, {
                type: 'pie',
                data: embeddingRatioData,
                options: {
                    responsive: true,
                    plugins: { legend: { position: 'bottom', labels: { color: '#d07300' } } }
                }
            });
        }

        // Initialize charts on page load
        document.addEventListener('DOMContentLoaded', renderCharts);
    </script>
</body>

</html>